// http://github.com/badosu/ircparser.js
IrcParser=function(){var b={};var a=/\x03(\d?\d)(,(\d?\d))?([^\x03\x0f]*)((\x03((\d\d?)(,\d\d?)?)?)|(\x0f))/;b.colors={white:{code:"00"},black:{code:"01"},navy:{code:"02"},green:{code:"03"},red:{code:"04"},brown:{code:"05"},purple:{code:"06"},olive:{code:"07"},yellow:{code:"08"},lightgreen:{code:"09"},teal:{code:"10"},cyan:{code:"11"},blue:{code:"12"},pink:{code:"13"},gray:{code:"14"},lightgray:{code:"15"}};b.styles={normal:{code:"\x00",replacement:"$2",regexp:/(\x00)([^\x00]*)\x00/g},bold:{code:"\x02",replacement:"<strong>$2</strong>",regexp:/(\x02)([^\x02]*)\x02/g},italic:{code:"\x16",replacement:"<em>$2</em>",regexp:/(\x16)([^\x16]*)\x16/g},underline:{code:"\x1f",replacement:"<u>$2</u>",regexp:/(\x1f)([^\x1f]*)\x1f/g}};b.bgcolors={};b.colorNames={};b.parse=function(c){c=this.replaceStyles(c);c=this.replaceColors(c);return c};b.replaceStyles=function(d){for(var e in this.styles){var c=this.styles[e];d=d.replace(c.regexp,c.replacement)}return d};b.replaceColors=function(l){var h=l.match(a);while(h){var k=("0"+h[1]).slice(-2);var c=h[2];var f=h[7];var m=h[8];var e=h[9];var g=this.colors[this.colorNames[k]];var d=g.replacement;if(c){var i=("0"+h[3]).slice(-2);var j=this.bgcolors[this.colorNames[i]];d="\x03"+k+j.replacement+"\x03";if(h[3].length==1){d=d.replace("$3","0$3")}if(f){d+=m;d+=e?e:","+i}}else{if(f){d=g.replacement+"\x03"+m;if(e){d+=e}}}if(h[1].length==1){d=d.replace("$1","0$1")}l=l.replace(a,d);h=l.match(a)}if(l.match(/\x03\d/g)){l=this.parse(l+"\x03")}return l};b.init=function(){for(var c in this.colors){var d=this.colors[c];d.replacement='<span class="irc-$1">$4</span>';this.colorNames[d.code]=c;this.bgcolors[c]={replacement:'<span class="irc-bg$3">$4</span>'}}};b.init();return b};
